<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.57.2" />
    <meta name="description" content="">


    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Redshift &amp; MySQL 性能对比实验 :: My New Hugo Site</title>

    
    <link href="/css/nucleus.css?1568602790" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1568602790" rel="stylesheet">
    <link href="/css/hybrid.css?1568602790" rel="stylesheet">
    <link href="/css/featherlight.min.css?1568602790" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1568602790" rel="stylesheet">
    <link href="/css/auto-complete.css?1568602790" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1568602790" rel="stylesheet">
    <link href="/css/theme.css?1568602790" rel="stylesheet">
    <link href="/css/hugo-theme.css?1568602790" rel="stylesheet">
    

    <script src="/js/jquery-3.3.1.min.js?1568602790"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/database/redshift_mysql/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <a id="logo" href="http://d1mo3mx8wgjhk2.cloudfront.net/">
</a>
<a> quickstart</a>

    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="Search...">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1568602790"></script>
<script type="text/javascript" src="/js/auto-complete.js?1568602790"></script>
<script type="text/javascript">
    
        var baseurl = "http:\/\/d1mo3mx8wgjhk2.cloudfront.net\/";
    
</script>
<script type="text/javascript" src="/js/search.js?1568602790"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/ai/" title="AI" class="dd-item 
        
        
        
        ">
      <a href="/ai/">
          <b>X. </b>AI
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/ai/tensorflow/" title="Deep Learning AMI下Tensorflow环境的安装与切换" class="dd-item ">
        <a href="/ai/tensorflow/">
        <b>X. </b>Deep Learning AMI下Tensorflow环境的安装与切换
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/ai/connect_alex/" title="利用Amazon Connect &#43; Lex 快速构建自己的呼叫中心 &amp; 智能语音机器人" class="dd-item ">
        <a href="/ai/connect_alex/">
        <b>X. </b>利用Amazon Connect &#43; Lex 快速构建自己的呼叫中心 &amp; 智能语音机器人
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/bi/" title="BI" class="dd-item 
        
        
        
        ">
      <a href="/bi/">
          <b>X. </b>BI
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/bi/aurora_redshift_quicksight/" title="从Aurora迁移到Redshift并利用Quicksight做数据可视化分析" class="dd-item ">
        <a href="/bi/aurora_redshift_quicksight/">
        <b>X. </b>从Aurora迁移到Redshift并利用Quicksight做数据可视化分析
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/mobile/" title="Mobile" class="dd-item 
        
        
        
        ">
      <a href="/mobile/">
          <b>X. </b>Mobile
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/mobile/serverless-image-handler/" title="S3图片处理" class="dd-item ">
        <a href="/mobile/serverless-image-handler/">
        <b>X. </b>S3图片处理
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/mobile/cognito_android/" title="基于Cognito的微信第三方登陸系統" class="dd-item ">
        <a href="/mobile/cognito_android/">
        <b>X. </b>基于Cognito的微信第三方登陸系統
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/alexa/" title="Alexa" class="dd-item 
        
        
        
        ">
      <a href="/alexa/">
          <b>X. </b>Alexa
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/alexa/account-linking-cognito/" title="AWS Cognito User Pool实现Alexa账户关联" class="dd-item ">
        <a href="/alexa/account-linking-cognito/">
        <b>X. </b>AWS Cognito User Pool实现Alexa账户关联
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/iot/" title="IOT" class="dd-item 
        
        
        
        ">
      <a href="/iot/">
          <b>X. </b>IOT
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/iot/docker/" title="IoT 开发环境： 可编译 C 的 Docker 镜像" class="dd-item ">
        <a href="/iot/docker/">
        <b>X. </b>IoT 开发环境： 可编译 C 的 Docker 镜像
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/migration/" title="Migration" class="dd-item 
        
        
        
        ">
      <a href="/migration/">
          <b>X. </b>Migration
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/migration/bjstozhy/" title="AWS服务迁移：从北京区到到宁夏" class="dd-item ">
        <a href="/migration/bjstozhy/">
        <b>X. </b>AWS服务迁移：从北京区到到宁夏
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/migration/dms-mongo-to-s3/" title="使用 AWS DMS 迁移 MongoDB 到 S3" class="dd-item ">
        <a href="/migration/dms-mongo-to-s3/">
        <b>X. </b>使用 AWS DMS 迁移 MongoDB 到 S3
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/migration/sms_vm-import/" title="使用 SMS &amp; VM-import 导入 VM 指导" class="dd-item ">
        <a href="/migration/sms_vm-import/">
        <b>X. </b>使用 SMS &amp; VM-import 导入 VM 指导
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/migration/s3_transmission/" title="基于Amazon ECS的国内外文件同步系统解决方案" class="dd-item ">
        <a href="/migration/s3_transmission/">
        <b>X. </b>基于Amazon ECS的国内外文件同步系统解决方案
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/migration/transferdomainroute53/" title="将域名从GoDaddy迁移至Route 53" class="dd-item ">
        <a href="/migration/transferdomainroute53/">
        <b>X. </b>将域名从GoDaddy迁移至Route 53
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/cicd/" title="CICD" class="dd-item 
        
        
        
        ">
      <a href="/cicd/">
          <b>X. </b>CICD
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/cicd/codepipeline_ecs/" title="基于CodePipeline ECS的CICD解决方案" class="dd-item ">
        <a href="/cicd/codepipeline_ecs/">
        <b>X. </b>基于CodePipeline ECS的CICD解决方案
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cicd/cicd_jar_jenkins/" title="基于jenkins的java应用程序CICD解决方案" class="dd-item ">
        <a href="/cicd/cicd_jar_jenkins/">
        <b>X. </b>基于jenkins的java应用程序CICD解决方案
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cicd/cicd_docker_blue_jenkins/" title="基于jenkins的容器蓝绿部署解决方案" class="dd-item ">
        <a href="/cicd/cicd_docker_blue_jenkins/">
        <b>X. </b>基于jenkins的容器蓝绿部署解决方案
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/cicd/automatic-apply-resource/" title="自动化脚本：监测 &amp; 自动启动可用资源" class="dd-item ">
        <a href="/cicd/automatic-apply-resource/">
        <b>X. </b>自动化脚本：监测 &amp; 自动启动可用资源
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/network/" title="Network" class="dd-item 
        
        
        
        ">
      <a href="/network/">
          <b>X. </b>Network
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/network/bypassicp/" title="# 在中国合法部署海外IP" class="dd-item ">
        <a href="/network/bypassicp/">
        <b>X. </b># 在中国合法部署海外IP
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/vpc_guide/" title="VPC配置指南" class="dd-item ">
        <a href="/network/vpc_guide/">
        <b>X. </b>VPC配置指南
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/database/" title="Database" class="dd-item 
        parent
        
        
        ">
      <a href="/database/">
          <b>X. </b>Database
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/database/redis_benchmark/" title="Amazon ElastiCache for Redis 基准测试" class="dd-item ">
        <a href="/database/redis_benchmark/">
        <b>X. </b>Amazon ElastiCache for Redis 基准测试
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/database/aurora-vs-mysql/" title="Aurora VS MySQL 压测" class="dd-item ">
        <a href="/database/aurora-vs-mysql/">
        <b>X. </b>Aurora VS MySQL 压测
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/database/redshift_mysql/" title="Redshift &amp; MySQL 性能对比实验" class="dd-item active">
        <a href="/database/redshift_mysql/">
        <b>X. </b>Redshift &amp; MySQL 性能对比实验
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/database/api-gateway-proxy-for-ddb/" title="利用API Gateway访问DynamoDB" class="dd-item ">
        <a href="/database/api-gateway-proxy-for-ddb/">
        <b>X. </b>利用API Gateway访问DynamoDB
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/database/mongodb/" title="将MongoDB部署到现有VPC" class="dd-item ">
        <a href="/database/mongodb/">
        <b>X. </b>将MongoDB部署到现有VPC
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/storage/" title="Storage" class="dd-item 
        
        
        
        ">
      <a href="/storage/">
          <b>X. </b>Storage
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/storage/s3fs/" title="Guide: S3FS快速部署" class="dd-item ">
        <a href="/storage/s3fs/">
        <b>X. </b>Guide: S3FS快速部署
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <p> </p>

    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='Edit this page' href="https://github.com/yuan00yuan/test_hugo_git/tree/master/content/database/Redshift_Mysql.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text">Edit this page</span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                    
          
          
            
            
          
          
            
            
          
          
            <a href='/'>Quick Start</a> > <a href='/database/'>Database</a> > Redshift & MySQL 性能对比实验
          
         
          
         
          
        
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#实验目的">实验目的</a></li>
<li><a href="#涉及组件">涉及组件</a></li>
<li><a href="#实验步骤">实验步骤</a>
<ul>
<li><a href="#配置-vpc">配置 VPC</a></li>
<li><a href="#配置-redshift">配置 RedShift</a></li>
<li><a href="#配置-rds">配置 RDS</a></li>
<li><a href="#配置-ec2">配置 EC2</a></li>
<li><a href="#导入数据到-rds">导入数据到 RDS</a></li>
<li><a href="#测试-rds">测试 RDS</a></li>
<li><a href="#导入数据到redshift">导入数据到RedShift</a></li>
<li><a href="#测试-redshift">测试 RedShift</a></li>
</ul></li>
<li><a href="#实验结果">实验结果</a>
<ul>
<li><a href="#rds-实验结果">RDS 实验结果</a></li>
<li><a href="#redshift-实验结果">RedShift 实验结果</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Redshift &amp; MySQL 性能对比实验
            </h1>
          

        





<h2 id="实验目的">实验目的</h2>

<p>提供 Redshift 和 RDS MySQL 在千万级数据中执行联表查询的性能对比。</p>

<p><a href="https://console.amazonaws.cn/cloudformation/home?region=cn-north-1#/stacks/new?stackName=RedshiftvsRDS&amp;templateURL=https://s3.cn-north-1.amazonaws.com.cn/redshift-rds/RDSvsRedshift.yaml"><img src="http://cdn.quickstart.org.cn/assets/ChinaRegion.png" alt="Image link china" /></a> &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://console.aws.amazon.com/cloudformation/home?region=us-east-1#/stacks/new?stackName=RedshiftvsRDS&amp;templateURL=https://s3.amazonaws.com/redshift-rds/RDSvsRedshift.yaml"><img src="http://cdn.quickstart.org.cn/assets/GlobalRegion.png" alt="Image link global" /></a></p>

<h2 id="涉及组件">涉及组件</h2>

<ul>
<li>EC2</li>
<li>RedShift</li>
<li>RDS</li>
<li>S3</li>
<li>VPC</li>
</ul>

<h2 id="实验步骤">实验步骤</h2>

<blockquote>
<p><strong>重要</strong></p>

<p>本实验默认您已经拥有了 AWS 账户并创建了 IAM 用户</p>

<p>若未执行以上设置，可参考<a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html#sign-up-for-aws">这里</a></p>
</blockquote>

<h3 id="配置-vpc">配置 VPC</h3>

<p>新建 VPC 安全组，具体步骤参考<a href="https://docs.aws.amazon.com/zh_cn/AmazonVPC/latest/UserGuide/getting-started-ipv4.html#getting-started-create-security-group">适用于 Amazon VPC 的 IPv4 入门</a></p>

<p>将安全组的<strong>入站规则</strong>设置为</p>

<ul>
<li><strong>Type</strong>: ALL Traffice</li>
<li><strong>Protocol</strong>: ALL</li>
<li><strong>Port Range</strong>: ALL</li>
<li><strong>Source</strong>: 选择 <strong>Custom IP</strong>，然后键入 <code>0.0.0.0/0</code>。</li>
</ul>

<blockquote>
<p><strong>重要</strong></p>

<p>除演示之外，建议不要使用 0.0.0.0/0，因为它允许从 Internet 上的任何计算机进行访问。在实际环境中，您需要根据自己的网络设置创建入站规则。</p>
</blockquote>

<h3 id="配置-redshift">配置 RedShift</h3>

<ol>
<li><p>为 Amazon Redshift 创建 IAM 角色</p>

<ul>
<li>登录 AWS 管理控制台 并通过以下网址打开 IAM 控制台 <a href="https://console.aws.amazon.com/iam/">https://console.aws.amazon.com/iam/</a>。</li>
<li>在左侧导航窗格中，选择 <strong>Roles</strong>。</li>
<li>选择 <strong>Create role</strong></li>
<li>在 <strong>AWS Service</strong> 组中，选择 <strong>Redshift</strong>。</li>
<li>在 <strong>Select your use case</strong> 下，选择 <strong>Redshift - Customizable</strong>，然后选择 <strong>Next: Permissions</strong>。</li>
<li>在 <strong>Attach permissions policies</strong> 页面上，选择 <strong>AdministratorAccess</strong>，然后选择 <strong>Next: Review</strong>。</li>
<li>对于 <strong>Role name</strong>，为您的角色键入一个名称。在本教程中，请键入 <code>myRedshiftRole</code>。</li>
<li>检查信息，然后选择 <strong>Create Role</strong>。</li>
<li>选择新角色的角色名称。</li>
<li>将 <strong>Role ARN</strong> 复制到您的剪贴板 — 此值是您刚刚创建的角色的 Amazon 资源名称 (ARN)。在之后的实验中（<strong>导入数据到 RedShift</strong>），将会使用到该值。</li>
</ul></li>

<li><p>登录 AWS 管理控制台 并通过以下网址打开 Amazon Redshift 控制台：<a href="https://console.aws.amazon.com/redshift/">https://console.aws.amazon.com/redshift/</a> 。</p></li>

<li><p>在主菜单中，选择您要在其中创建群集的区域。在本教程中，请选择 <strong>美国西部（俄勒冈）</strong>。 <img src="http://cdn.quickstart.org.cn/assets/redshift-vs-mysql/rs-gsg-aws-region-selector.png" alt="" /></p></li>
</ol>

<p>. 在 Amazon Redshift 仪表板上，选择 <strong>Launch Cluster</strong>。                                  “Amazon Redshift Dashboard”如下所示!<img src="http://cdn.quickstart.org.cn/assets/redshift-vs-mysql/rs-gsg-clusters-launch-cluster-10.png" alt="rs-gsg-clusters-launch-cluster-10.png" /></p>

<ol>
<li><p>在“Cluster Details”页面上，输入下列值，然后选择 <strong>Continue</strong>：</p>

<ul>
<li><strong>Cluster Identifier</strong>：键入 <code>rs-vs-mysql</code>。<br /></li>
<li><strong>Database Name</strong>：将此框留空。Amazon Redshift 将会创建一个名为 <code>dev</code> 的默认数据库。<br /></li>
<li><strong>Database Port</strong>：键入数据库将接受连接的端口号。您应该在本教程的先决条件步骤确定了端口号。在启动群集之后便无法更改端口号，因此请确保您知道防火墙中的一个开放端口号，这样才能从 SQL                                        客户端工具连接到群集中的数据库。<br /></li>
<li><strong>Master User Name</strong>：键入 <code>masteruser</code>。在群集可供使用之后，您将使用此用户名和密码连接到您的数据库。<br /></li>
<li><strong>Master User Password</strong> 和 <strong>Confirm Password</strong>：为主用户账户键入密码。</li>
</ul></li>
</ol>

<p><img src="http://cdn.quickstart.org.cn/assets/redshift-vs-mysql/conf-rs.jpg" alt="" /></p>

<ol>
<li><p>在“Node Configuration”页面上，选择下列值，然后选择 <strong>Continue</strong>：</p>

<ul>
<li><strong>Node Type</strong>：<strong>dc1.large</strong></li>
<li><strong>Cluster Type</strong>：<strong>Multi Node</strong></li>
<li><strong>Number of compute nodes</strong>：<strong>2</strong></li>
</ul></li>
</ol>

<p><img src="http://cdn.quickstart.org.cn/assets/redshift-vs-mysql/conf-rs-nodes.jpeg" alt="" /></p>

<ol>
<li><p>在“<strong>Additional Configuration</strong>”页面上，</p>

<ul>
<li><strong>Choose a VPC</strong>：选择您在<strong>配置 VPC</strong>这一步骤中创建的安全组所对应的 VPC</li>
<li><strong>Publicly Accessible</strong>：<strong>Yes</strong></li>
<li><strong>VPC Security Groups</strong>：选择您在<strong>配置 VPC</strong>这一步骤中创建的安全组</li>
<li><strong>AvailableRoles</strong>： 选择<strong>myRedshiftRole</strong></li>
<li><strong>其他选项</strong>采用<strong>默认</strong>选项即可</li>
</ul></li>
</ol>

<p>然后选择<strong>Continue</strong>。</p>

<ol>
<li>在“Review”页面上，查看您进行的选择，然后选择 <strong>Launch Cluster</strong>。</li>
</ol>

<h3 id="配置-rds">配置 RDS</h3>

<ol>
<li><p>登录 AWS 管理控制台 并通过以下网址打开 Amazon RDS 控制台：<a href="https://console.aws.amazon.com/rds/">https://console.aws.amazon.com/rds/</a>。</p></li>

<li><p>在 Amazon RDS 控制台的右上角，选择您要在其中创建数据库实例的区域。这里为保证与之前创建 RedShift 的区域相同。</p></li>

<li><p>在导航窗格中，选择<strong>实例</strong>。</p></li>

<li><p>选择<strong>启动数据库实例</strong>。<strong>启动数据库实例向导</strong>在<strong>选择引擎</strong>页面打开。<img src="/conf-rds.jpeg" alt="" /></p></li>

<li><p>选择 <strong>MySQL</strong>，然后选择<strong>下一步</strong>。</p></li>

<li><p><strong>选择使用案例</strong>页面询问您是否计划使用所创建的数据库实例进行生产。选择 <strong>开发/测试</strong>，然后选择 <strong>下一步</strong> 。</p></li>

<li><p>在<strong>指定数据库详细信息</strong>页面上，指定数据库实例信息。选择下列值，然后选择 <strong>下一步</strong>。</p>

<ul>
<li><strong>数据库实例类</strong>：db.r4.xlarge</li>
<li><strong>存储类型</strong>：预置 IOPS</li>
<li><strong>预置 IOPS</strong>：1000</li>
<li><strong>数据库实例标识符</strong>：键入 <code>rs-vs-mysql</code>。</li>
<li><strong>主用户名</strong>：键入 <code>masteruser</code>。</li>
<li><strong>主密码</strong>和<strong>确认密码</strong>：键入您的密码</li>
<li><strong>其他设置保持默认</strong>：</li>
</ul></li>
</ol>

<p><img src="http://cdn.quickstart.org.cn/assets/redshift-vs-mysql/conf-rds-mysql.jpeg" alt="" /><img src="http://cdn.quickstart.org.cn/assets/redshift-vs-mysql/conf-rds-mysql-2.jpg" alt="" /></p>

<ol>
<li><p>在<strong>配置高级设置</strong>页面上，提供 RDS 启动 MySQL 数据库实例所需的其他信息。选择下列值，然后选择 <strong>下一步</strong>。</p>

<ul>
<li><strong>Virtual Private Cloud (VPC)</strong>：选择您在<strong>配置 VPC</strong>这一步骤中创建的安全组所对应的 VPC</li>
<li><strong>公开可用性</strong>：是</li>
<li><strong>VPC安全组</strong>：选择现有 VPC 安全组，并且选择<strong>配置 VPC</strong>这一步骤中创建的安全组</li>
<li><strong>数据库名称</strong>：键入<code>dbname</code></li>
<li><strong>备份保留期</strong>：1 天</li>
<li><strong>其他请选择默认</strong></li>
</ul></li>
</ol>

<h3 id="配置-ec2">配置 EC2</h3>

<ol>
<li><p>启动实例</p>

<ul>
<li><p>打开 Amazon EC2 控制台 <a href="https://console.aws.amazon.com/ec2/">https://console.aws.amazon.com/ec2/</a>。选择您要在其中创建EC2实例的区域。这里为保证与之前创建 RedShift、RDS 的区域相同, 请选择<strong>俄勒冈</strong>。</p></li>

<li><p>从控制台控制面板中，选择 <strong>启动实例</strong>。</p></li>

<li><p><strong>Choose an Amazon Machine Image (AMI)</strong> 页面显示一组称为 <em>Amazon 系统映像 (AMI)</em> 的基本配置，作为您的实例的模板。选择 Amazon Linux AMI 2 的 HVM 版本 AMI。</p></li>

<li><p>在<strong>选择实例类型</strong> 页面上，您可以选择实例的硬件配置。选择 <code>t2.small</code> 类型</p></li>

<li><p>在<strong>配置实例详细信息</strong>页面上，自动分配公有 IP 选择<strong>启用</strong>，其他选择默认</p></li>

<li><p>在<strong>配置安全组</strong>页面选择<strong>选择一个现有的安全组</strong>，并在表格中选择<strong>配置 VPC</strong>这一步骤中创建的安全组</p></li>

<li><p>在<strong>审核</strong>页面选择<strong>启动</strong></p></li>

<li><p>当系统提示提供密钥时，选择 <strong>选择现有的密钥对</strong>，然后选择合适的密钥对。若没有创建密钥对，请参考<a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/get-set-up-for-amazon-ec2.html#create-a-key-pair">创建密钥对</a></p></li>
</ul>

<p>准备好后，选中确认复选框，然后选择 <strong>启动实例</strong>。</p></li>

<li><p>连接到 EC2</p></li>
</ol>

<p>请参考<a href="https://docs.aws.amazon.com/zh_cn/AWSEC2/latest/UserGuide/AccessingInstancesLinux.html">使用 SSH 连接到 Linux 实例</a></p>

<ol>
<li>在实例中安装 MySQL</li>
</ol>

<p><strong>在连接到 EC2 实例后</strong>，依次输入以下命令，在实例中安装 MySQL</p>

<pre><code>   wget http://repo.mysql.com/mysql-community-release-el6-5.noarch.rpm
   
   sudo rpm -ivh mysql-community-release-el6-5.noarch.rpm
   
   sudo yum install mysql-community-server -y
</code></pre>

<ol>
<li>在实例中安装 psql 工具</li>
</ol>

<p><strong>在连接到 EC2 实例后</strong>，输入以下命令，在实例中安装 psql</p>

<pre><code>   sudo yum install postgresql-server -y
</code></pre>

<h3 id="导入数据到-rds">导入数据到 RDS</h3>

<ol>
<li>切换目录</li>
</ol>

<p>输入命令</p>

<pre><code>   cd ~
</code></pre>

<ol>
<li>通过 AWS 命令行界面（CLI）下载数据</li>
</ol>

<p>AWS CLI 已经预安装在了 Amazon Linux AMI 上，但您仍需要进行相应的配置，详情可参考<a href="https://docs.aws.amazon.com/zh_cn/cli/latest/userguide/cli-chap-getting-started.html">配置 AWS CLI</a></p>

<p>在 EC2 中配置完成 AWS CLI 后，输入以下命令拷贝测试数据
   - Global</p>

<pre><code>   aws s3 cp s3://rs-vs-rds/test_date/2006.csv 2006.csv
   
   aws s3 cp s3://rs-vs-rds/test_date/2007.csv 2007.csv
   
   aws s3 cp s3://rs-vs-rds/test_date/2008.csv 2008.csv
</code></pre>

<ul>
<li><p>中国区</p>

<pre><code>aws s3 cp s3://rs-vs-rds/2006.csv 2006.csv --source-region cn-northwest-1 --region &lt;your region&gt;
   
aws s3 cp s3://rs-vs-rds/2006.csv 2007.csv --source-region cn-northwest-1 --region &lt;your region&gt;
   
aws s3 cp s3://rs-vs-rds/2006.csv 2008.csv --source-region cn-northwest-1 --region &lt;your region&gt;
</code></pre></li>
</ul>

<ol>
<li>连接到 RDS</li>
</ol>

<p>参考<a href="https://docs.aws.amazon.com/zh_cn/AmazonRDS/latest/UserGuide/USER_ConnectToInstance.html">与运行 MySQL 数据库引擎的数据库实例连接</a></p>

<ol>
<li>创建表格</li>
</ol>

<p>输入命令</p>

<pre><code>   use dbname;
</code></pre>

<pre><code>   CREATE TABLE demobigtable (
   	Year integer,
   	Month integer,
   	DayofMonth integer,
   	DayOfWeek varchar(255),
   	DepTIme varchar(255),
   	CRSDepTime varchar(255),
   	ArrTime varchar(255),
   	CRSArrTime varchar(255),
   	UniqueCarrier varchar(255),
   	FlightNum varchar(255),
   	TailNum varchar(255),
   	ActualElapsedTime varchar(255),
   	CRSElapsedTime varchar(255),
   	AirTime varchar(255),
   	ArrDelay varchar(255),
   	DepDelay varchar(255),
   	Origin varchar(255),
   	Dest varchar(255),
   	Distance varchar(255),
   	TaxiIn varchar(255),
   	TaxiOut varchar(255),
   	Cancelled varchar(255),
   	CancellationCode varchar(255),
   	Diverted varchar(255),
   	CarrierDelay varchar(255),
   	WeatherDelay varchar(255),
   	NASDelay varchar(255),
   	SecurityDelay varchar(255),
   	LateAircraftDelay varchar(255)
   ) ;
</code></pre>

<ol>
<li><p>加载数据</p>

<p>执行 SQL 语句</p>

<pre><code>load data local infile '2006.csv'
into table demobigtable
fields terminated by ','
lines terminated by '\n' 
IGNORE 1 LINES;
       
load data local infile '2007.csv'
into table demobigtable
fields terminated by ','
lines terminated by '\n' 
IGNORE 1 LINES;
       
load data local infile '2008.csv'
into table demobigtable
fields terminated by ','
lines terminated by '\n' 
IGNORE 1 LINES;
</code></pre></li>
</ol>

<h3 id="测试-rds">测试 RDS</h3>

<p>输入命令</p>

<pre><code>SELECT a.Year,a.Month,a.DayofMonth,a.FlightNum,a.TailNum
FROM
      (SELECT Year,Month,DayofMonth,FlightNum,TailNum 
      FROM demobigtable 
      GROUP BY Year,Month,DayofMonth,FlightNum,TailNum) 
      AS a
LIMIT 10;
</code></pre>

<p>获取 RDS 实验结果</p>

<h3 id="导入数据到redshift">导入数据到RedShift</h3>

<ol>
<li><p>输入以下命令退出 RDS，若您之前已经退出了 RDS，请忽略该步骤。</p>

<pre><code>exit；
</code></pre></li>

<li><p>连接到 RedShift</p></li>
</ol>

<p>参考<a href="https://docs.aws.amazon.com/zh_cn/redshift/latest/mgmt/connecting-from-psql.html">使用 psql 工具连接到您的群集</a></p>

<ol>
<li><p>创建表格</p>

<pre><code>CREATE TABLE demobigtable (
	Year integer,
	Month integer,
	DayofMonth integer,
	DayOfWeek varchar(255),
	DepTIme varchar(255),
	CRSDepTime varchar(255),
	ArrTime varchar(255),
	CRSArrTime varchar(255),
	UniqueCarrier varchar(255),
	FlightNum varchar(255),
	TailNum varchar(255),
	ActualElapsedTime varchar(255),
	CRSElapsedTime varchar(255),
	AirTime varchar(255),
	ArrDelay varchar(255),
	DepDelay varchar(255),
	Origin varchar(255),
	Dest varchar(255),
	Distance varchar(255),
	TaxiIn varchar(255),
	TaxiOut varchar(255),
	Cancelled varchar(255),
	CancellationCode varchar(255),
	Diverted varchar(255),
	CarrierDelay varchar(255),
	WeatherDelay varchar(255),
	NASDelay varchar(255),
	SecurityDelay varchar(255),
	LateAircraftDelay varchar(255)
) ;
</code></pre></li>

<li><p>加载数据</p></li>
</ol>

<p>请将以下 COPY 命令中的*<iam-role-arn>*替换为您的角色 ARN，输入至 psql 命令行中
   - Global</p>

<pre><code>   copy demobigtable from 's3://rs-vs-rds/test_date/2006.csv' 
   credentials 'aws_iam_role=&lt;iam-role-arn&gt;'
   delimiter ',' 
   IGNOREHEADER 1
   ACCEPTINVCHARS;
   
   copy demobigtable from 's3://rs-vs-rds/test_date/2007.csv' 
   credentials 'aws_iam_role=&lt;iam-role-arn&gt;'
   delimiter ',' 
   IGNOREHEADER 1
   ACCEPTINVCHARS;
   
   copy demobigtable from 's3://rs-vs-rds/test_date/2008.csv' 
   credentials 'aws_iam_role=&lt;iam-role-arn&gt;'
   delimiter ',' 
   IGNOREHEADER 1
   ACCEPTINVCHARS;
</code></pre>

<ul>
<li><p>中国区</p>

<pre><code>copy demobigtable from 's3://rs-vs-rds/2006.csv' 
credentials 'aws_iam_role=&lt;iam-role-arn&gt;'
delimiter ',' 
IGNOREHEADER 1
ACCEPTINVCHARS;
   
copy demobigtable from 's3://rs-vs-rds/2007.csv' 
credentials 'aws_iam_role=&lt;iam-role-arn&gt;'
delimiter ',' 
IGNOREHEADER 1
ACCEPTINVCHARS;
   
copy demobigtable from 's3://rs-vs-rds/2008.csv' 
credentials 'aws_iam_role=&lt;iam-role-arn&gt;'
delimiter ',' 
IGNOREHEADER 1
ACCEPTINVCHARS;
</code></pre></li>
</ul>

<h3 id="测试-redshift">测试 RedShift</h3>

<ol>
<li><p>开启 sql 时间记录功能</p>

<pre><code>\timing on
</code></pre></li>

<li><p>执行 SQL 语句</p>

<pre><code>SELECT a.Year,a.Month,a.DayofMonth,a.FlightNum,a.TailNum
FROM
     (SELECT Year,Month,DayofMonth,FlightNum,TailNum 
     FROM demobigtable 
     GROUP BY Year,Month,DayofMonth,FlightNum,TailNum) 
     AS a
LIMIT 10;
</code></pre></li>
</ol>

<h2 id="实验结果">实验结果</h2>

<h3 id="rds-实验结果">RDS 实验结果</h3>

<p><img src="http://cdn.quickstart.org.cn/assets/redshift-vs-mysql/result-rds-3.jpg" alt="" /></p>

<h3 id="redshift-实验结果">RedShift 实验结果</h3>

<p><img src="http://cdn.quickstart.org.cn/assets/redshift-vs-mysql/result-rs-3.jpg" alt="" /></p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


	 
	 
		
			<a class="nav nav-prev" href="/database/aurora-vs-mysql/" title="Aurora VS MySQL 压测"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/database/api-gateway-proxy-for-ddb/" title="利用API Gateway访问DynamoDB" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1568602790"></script>
    <script src="/js/perfect-scrollbar.min.js?1568602790"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1568602790"></script>
    <script src="/js/jquery.sticky.js?1568602790"></script>
    <script src="/js/featherlight.min.js?1568602790"></script>
    <script src="/js/highlight.pack.js?1568602790"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1568602790"></script>
    <script src="/js/learn.js?1568602790"></script>
    <script src="/js/hugo-learn.js?1568602790"></script>

    <link href="/mermaid/mermaid.css?1568602790" rel="stylesheet" />
    <script src="/mermaid/mermaid.js?1568602790"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

